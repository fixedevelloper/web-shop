"use strict";(self.webpackChunkcreativ=self.webpackChunkcreativ||[]).push([[146],{4146:(Zt,q,s)=>{s.r(q),s.d(q,{CatalogueModule:()=>ht});var f=s(8583),p=s(8909),c=s(8550),r=s(3679),g=s(9344),t=s(3018),h=s(7846),x=s(3903),Z=s(5469),S=s(9075),u=s(7552),y=s(7871),w=s(1875),U=s(519),M=s(2201);const E=["childModal"],G=["childEditModal"];function N(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",46),t.TgZ(1,"input",47),t.NdJ("change",function(){const a=t.CHM(e);return a.selectFn(!a.allRowsSelected)}),t.qZA(),t.qZA()}if(2&i){const e=n.allRowsSelected;t.xp6(1),t.Q6J("checked",e)}}function O(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",46),t.TgZ(1,"input",47),t.NdJ("change",function(a){return t.CHM(e).onCheckboxChangeFn(a)}),t.qZA(),t.qZA()}if(2&i){const e=n.isSelected;t.xp6(1),t.Q6J("checked",e)}}function R(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.rowIndex+1," ")}function L(i,n){if(1&i&&(t.TgZ(0,"div",48),t._UZ(1,"avatar",49),t.TgZ(2,"div",50),t.TgZ(3,"div",51),t._uU(4),t.qZA(),t.qZA(),t.qZA()),2&i){const e=n.row;t.xp6(1),t.Q6J("size",38)("src",e.image),t.xp6(3),t.Oqu(e.name)}}function F(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.row.description," ")}function H(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"dropdown",52),t.NdJ("click",function(a){return t.CHM(e),t.MAs(4).toggle(a)}),t.TgZ(1,"a",53),t._UZ(2,"i",54),t.qZA(),t.TgZ(3,"dropdown-menu",55,56),t.TgZ(5,"a",57),t.NdJ("click",function(){const l=t.CHM(e).row;return t.oxw().showDetail(l)}),t.TgZ(6,"div",48),t._UZ(7,"i",58),t.TgZ(8,"span",50),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"a",57),t.NdJ("click",function(){const l=t.CHM(e).row,d=t.oxw(),m=t.MAs(113);return d.delete(l,m)}),t.TgZ(12,"div",48),t._UZ(13,"i",58),t.TgZ(14,"span",50),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(9),t.Oqu(t.lcZ(10,2,"action.edit")),t.xp6(6),t.Oqu(t.lcZ(16,4,"action.delete")))}function I(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",59),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirm()}),t._uU(4,"Yes"),t.qZA(),t.TgZ(5,"button",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().decline()}),t._uU(6,"No"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij("Voulez-vous vraiment suprimez l'eleve:",e.deleteRow.name,"?")}}const k=function(){return{backdrop:"static"}};let P=(()=>{class i{constructor(e,o,a,l,d,m,T,b,v){this.modalService=e,this.router=o,this.toaster=a,this.databaseService=l,this.translateservice=d,this.formBuilder=m,this.cdr=T,this.sanitizer=b,this.route=v,this.imageUrl="/assets/images/avatars/thumb-1.jpg",this.fileName=" ",this.fileType=" ",this.rows=[],this.parents=[],this.selected=[],this.columnMode=c.hq.force,this.SelectionType=c.RT,this.rowHeight="auto",this.scrollbarH=!1,this.columns=[{prop:"name"},{name:"regime"},{name:"Company"}],this.imageSrc="/assets/images/avatars/thumb-1.jpg",this.status=!1,this.imageId=null,this.fetch(),this.cdr.markForCheck()}ngOnInit(){this.formGroup=this.formBuilder.group({name:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(220)]],description:[null,r.kI.required],filename:[null,r.kI.nullValidator],id:[null]})}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide(),this.childEditModal.hide(),this.formGroup.reset()}exportToPDF(){}showDetail(e){this.formGroup.reset(),this.formGroup.patchValue(e),this.imageSrc=e.image,this.imageId=e.image_id,this.childEditModal.show(),this.cdr.markForCheck()}confirm(){}decline(){}delete(e,o){}onReset(){this.hideChildModal()}onSubmit(){this.databaseService.ImageAdd({filename:this.imageSrc,name:this.nameimage,type:this.fileType,id:this.imageId}).subscribe(o=>{this.imageId=o.data.id,o&&this.databaseService.CategoryAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,image:o.data.id,id:null}}).subscribe(l=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},l=>{console.log(l),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})})}onFileSelect(e){this.status=!1;const o=e.target.files[0];if(console.log(o),this.status=e.target.files.length>0,!0===this.status){const a=new FileReader;a.readAsDataURL(o),a.onload=()=>{this.imageSrc=a.result,this.fileType=o.type,this.nameimage=o.name,this.imageId=null,this.cdr.detectChanges()}}}fetch(){this.databaseService.CategoryGet().subscribe(e=>{this.rows=e.data,this.cdr.markForCheck()},e=>{console.log(e)})}onSubmitEdit(){null==this.imageId?this.databaseService.ImageAdd({filename:this.imageSrc,name:this.nameimage,type:this.fileType,id:this.imageId}).subscribe(o=>{this.imageId=o.data.id,o&&this.databaseService.CategoryAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,image:o.data.id,id:this.formGroup.value.id}}).subscribe(l=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},l=>{console.log(l),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})}):this.databaseService.CategoryAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,image:this.imageId,id:this.formGroup.value.id}}).subscribe(o=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},o=>{console.log(o),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.tT),t.Y36(p.F0),t.Y36(g._W),t.Y36(x.k),t.Y36(Z.sK),t.Y36(r.qu),t.Y36(t.sBO),t.Y36(S.H7),t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-category"]],viewQuery:function(e,o){if(1&e&&(t.Gf(c.nE,5),t.Gf(E,5),t.Gf(G,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.table=a.first),t.iGM(a=t.CRH())&&(o.childModal=a.first),t.iGM(a=t.CRH())&&(o.childEditModal=a.first)}},features:[t._Bn([g._W])],decls:114,vars:85,consts:[[1,"card"],[1,"card-header"],[1,"card-title","mb-2","fw-bolder"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"btn-group"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"la","la-file-pdf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"la","la-plus"],[1,"card-body"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","loadingIndicator","selected","selectionType","rowHeight","scrollbarH"],["table",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","#",3,"width"],["prop","name",3,"name","width","canAutoResize","resizeable"],[3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"col-md-8"],[1,"form-group","mb-3"],[1,"form-label"],["type","text","formControlName","name",1,"form-control"],["type","text","formControlName","description",1,"form-control"],[1,"col-md-3","mb-3"],[1,"mb-3"],[3,"shape","size","src"],["type","file","accept","image/png, image/jpeg",1,"form-control",3,"change"],[1,"col-md-12"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],["childEditModal","bs-modal"],["id","dialog-childedit-name",1,"modal-title","pull-left"],["template",""],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"feather","icon-trash-2"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.exportToPDF()}),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return o.showChildModal()}),t._UZ(12,"i",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t.TgZ(17,"ngx-datatable",11,12),t.TgZ(19,"ngx-datatable-column",13),t.YNc(20,N,2,1,"ng-template",14),t.YNc(21,O,2,1,"ng-template",15),t.qZA(),t.TgZ(22,"ngx-datatable-column",16),t.YNc(23,R,1,1,"ng-template",15),t.qZA(),t.TgZ(24,"ngx-datatable-column",17),t.ALo(25,"translate"),t.YNc(26,L,5,3,"ng-template",15),t.qZA(),t.TgZ(27,"ngx-datatable-column",18),t.ALo(28,"translate"),t.YNc(29,F,1,1,"ng-template",15),t.qZA(),t.TgZ(30,"ngx-datatable-column",19),t.YNc(31,H,17,6,"ng-template",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",20,21),t.TgZ(34,"div",22),t.TgZ(35,"div",23),t.TgZ(36,"div",24),t.TgZ(37,"h4",25),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"button",26),t.NdJ("click",function(){return o.hideChildModal()}),t.TgZ(41,"span",27),t._uU(42,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",28),t.TgZ(44,"form",29),t.NdJ("validSubmit",function(){return o.onSubmit()}),t.TgZ(45,"div",30),t.TgZ(46,"div",31),t.TgZ(47,"div",32),t.TgZ(48,"label",33),t._uU(49),t.ALo(50,"translate"),t.qZA(),t._UZ(51,"input",34),t.qZA(),t.TgZ(52,"div",32),t.TgZ(53,"label",33),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"textarea",35),t._uU(57,"                "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",36),t.TgZ(59,"label",33),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"div",37),t._UZ(63,"avatar",38),t.qZA(),t.TgZ(64,"input",39),t.NdJ("change",function(l){return o.onFileSelect(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",40),t.TgZ(66,"button",41),t.NdJ("click",function(){return o.onReset()}),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"button",42),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"div",20,43),t.TgZ(74,"div",22),t.TgZ(75,"div",23),t.TgZ(76,"div",24),t.TgZ(77,"h4",44),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"button",26),t.NdJ("click",function(){return o.hideChildModal()}),t.TgZ(81,"span",27),t._uU(82,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(83,"div",28),t.TgZ(84,"form",29),t.NdJ("validSubmit",function(){return o.onSubmitEdit()}),t.TgZ(85,"div",30),t.TgZ(86,"div",31),t.TgZ(87,"div",32),t.TgZ(88,"label",33),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"input",34),t.qZA(),t.TgZ(92,"div",32),t.TgZ(93,"label",33),t._uU(94),t.ALo(95,"translate"),t.qZA(),t.TgZ(96,"textarea",35),t._uU(97,"                "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",36),t.TgZ(99,"label",33),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"div",37),t._UZ(103,"avatar",38),t.qZA(),t.TgZ(104,"input",39),t.NdJ("change",function(l){return o.onFileSelect(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(105,"div",40),t.TgZ(106,"button",41),t.NdJ("click",function(){return o.onReset()}),t._uU(107),t.ALo(108,"translate"),t.qZA(),t.TgZ(109,"button",42),t._uU(110),t.ALo(111,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(112,I,7,1,"ng-template",null,45,t.W1O)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,49,"title.category")),t.xp6(6),t.hij("",t.lcZ(10,51,"action.print")," "),t.xp6(4),t.hij("",t.lcZ(14,53,"action.add")," "),t.xp6(4),t.Q6J("rows",o.rows)("columnMode",o.columnMode)("headerHeight",50)("footerHeight",100)("limit",10)("loadingIndicator",!0)("selected",o.selected)("selectionType",o.SelectionType.multi)("rowHeight",o.rowHeight)("scrollbarH",o.scrollbarH),t.xp6(2),t.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),t.xp6(3),t.Q6J("width",20),t.xp6(2),t.s9C("name",t.lcZ(25,55,"fields.libelle")),t.Q6J("width",350)("canAutoResize",!1)("resizeable",!1),t.xp6(3),t.s9C("name",t.lcZ(28,57,"fields.description")),t.Q6J("width",70),t.xp6(3),t.Q6J("sortable",!1)("width",40),t.xp6(2),t.Q6J("config",t.DdM(83,k)),t.xp6(6),t.Oqu(t.lcZ(39,59,"title.addcategory")),t.xp6(6),t.Q6J("formGroup",o.formGroup),t.xp6(5),t.Oqu(t.lcZ(50,61,"fields.libelle")),t.xp6(5),t.Oqu(t.lcZ(55,63,"fields.description")),t.xp6(6),t.Oqu(t.lcZ(61,65,"fields.image")),t.xp6(3),t.Q6J("shape","square")("size",130)("src",o.imageSrc),t.xp6(4),t.Oqu(t.lcZ(68,67,"action.cancel")),t.xp6(3),t.Oqu(t.lcZ(71,69,"action.save")),t.xp6(2),t.Q6J("config",t.DdM(84,k)),t.xp6(6),t.Oqu(t.lcZ(79,71,"title.editcategory")),t.xp6(6),t.Q6J("formGroup",o.formGroup),t.xp6(5),t.Oqu(t.lcZ(90,73,"fields.libelle")),t.xp6(5),t.Oqu(t.lcZ(95,75,"fields.description")),t.xp6(6),t.Oqu(t.lcZ(101,77,"fields.image")),t.xp6(3),t.Q6J("shape","square")("size",130)("src",o.imageSrc),t.xp6(4),t.Oqu(t.lcZ(108,79,"action.cancel")),t.xp6(3),t.Oqu(t.lcZ(111,81,"action.save")))},directives:[c.nE,c.UC,c.tk,c.vq,h.oB,r._Y,r.JL,r.sg,u.MU,u.HK,r.Fj,u.oH,r.JJ,r.u,y.A,w.L,U.h,M.h],pipes:[Z.X$],styles:[""]}),i})();var A=s(8308);const Y=["childModal"],Q=["childEditModal"];function z(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"input",52),t.NdJ("change",function(){const a=t.CHM(e);return a.selectFn(!a.allRowsSelected)}),t.qZA(),t.qZA()}if(2&i){const e=n.allRowsSelected;t.xp6(1),t.Q6J("checked",e)}}function j(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"input",52),t.NdJ("change",function(a){return t.CHM(e).onCheckboxChangeFn(a)}),t.qZA(),t.qZA()}if(2&i){const e=n.isSelected;t.xp6(1),t.Q6J("checked",e)}}function V(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.rowIndex+1," ")}function D(i,n){if(1&i&&(t.TgZ(0,"div",53),t._UZ(1,"avatar",54),t.TgZ(2,"div",55),t.TgZ(3,"div",56),t._uU(4),t.qZA(),t.qZA(),t.qZA()),2&i){const e=n.row;t.xp6(1),t.Q6J("size",38)("src",e.image),t.xp6(3),t.Oqu(e.name)}}function B(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.row.price," ")}function K(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.row.category_name," ")}function W(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.row.quantity," ")}function X(i,n){1&i&&t._uU(0),2&i&&t.hij(" ",n.row.description," ")}function $(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"dropdown",57),t.NdJ("click",function(a){return t.CHM(e),t.MAs(4).toggle(a)}),t.TgZ(1,"a",58),t._UZ(2,"i",59),t.qZA(),t.TgZ(3,"dropdown-menu",60,61),t.TgZ(5,"a",62),t.NdJ("click",function(){const l=t.CHM(e).row;return t.oxw().showDetail(l)}),t.TgZ(6,"div",53),t._UZ(7,"i",63),t.TgZ(8,"span",55),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"a",62),t.NdJ("click",function(){const l=t.CHM(e).row,d=t.oxw(),m=t.MAs(156);return d.delete(l,m)}),t.TgZ(12,"div",53),t._UZ(13,"i",63),t.TgZ(14,"span",55),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(9),t.Oqu(t.lcZ(10,2,"action.edit")),t.xp6(6),t.Oqu(t.lcZ(16,4,"action.delete")))}function tt(i,n){if(1&i&&(t.TgZ(0,"ng-option",64),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function et(i,n){if(1&i&&(t.TgZ(0,"ng-option",64),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ot(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",65),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirm()}),t._uU(4,"Yes"),t.qZA(),t.TgZ(5,"button",67),t.NdJ("click",function(){return t.CHM(e),t.oxw().decline()}),t._uU(6,"No"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij("Voulez-vous vraiment suprimez l'eleve:",e.deleteRow.name,"?")}}const J=function(){return{backdrop:"static"}},it=[{path:"category",component:P,data:{title:"Dashboard",hidePageHeader:!0}},{path:"product",component:(()=>{class i{constructor(e,o,a,l,d,m,T,b,v){this.modalService=e,this.router=o,this.toaster=a,this.databaseService=l,this.translateservice=d,this.formBuilder=m,this.cdr=T,this.sanitizer=b,this.route=v,this.imageUrl="/assets/images/avatars/thumb-1.jpg",this.fileName=" ",this.fileType=" ",this.rows=[],this.categories=[],this.selected=[],this.columnMode=c.hq.force,this.SelectionType=c.RT,this.rowHeight="auto",this.scrollbarH=!1,this.columns=[{prop:"name"},{name:"regime"},{name:"Company"}],this.imageSrc="/assets/images/avatars/thumb-1.jpg",this.status=!1,this.imageId=null,this.fetch(),this.databaseService.CategoryGet().subscribe(C=>{this.categories=C.data},C=>{console.log(C)}),this.cdr.markForCheck()}ngOnInit(){this.formGroup=this.formBuilder.group({name:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(220)]],description:[null,r.kI.required],price:[null,r.kI.nullValidator],codebarre:[null,r.kI.nullValidator],onsale:[null,r.kI.nullValidator],category:[null,r.kI.nullValidator],id:[null]})}showChildModal(){this.childModal.show()}hideChildModal(){this.childModal.hide(),this.childEditModal.hide(),this.formGroup.reset()}exportToPDF(){}showDetail(e){this.formGroup.reset(),this.formGroup.patchValue(e),this.imageSrc=e.image,this.imageId=e.image_id,this.childEditModal.show(),this.cdr.markForCheck()}confirm(){}decline(){}delete(e,o){}onReset(){this.hideChildModal()}onSubmit(){this.databaseService.ImageAdd({filename:this.imageSrc,name:this.nameimage,type:this.fileType,id:this.imageId}).subscribe(o=>{this.imageId=o.data.id,o&&this.databaseService.ProductAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,category:this.formGroup.value.category,price:this.formGroup.value.price,codebarre:this.formGroup.value.codebarre,image:o.data.id,id:null}}).subscribe(l=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},l=>{console.log(l),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})})}onFileSelect(e){this.status=!1;const o=e.target.files[0];if(console.log(o),this.status=e.target.files.length>0,!0===this.status){const a=new FileReader;a.readAsDataURL(o),a.onload=()=>{this.imageSrc=a.result,this.fileType=o.type,this.nameimage=o.name,this.imageId=null,this.cdr.detectChanges()}}}fetch(){this.databaseService.ProductGet(1).subscribe(e=>{this.rows=e.data,this.cdr.markForCheck()},e=>{console.log(e)})}onSubmitEdit(){null==this.imageId?this.databaseService.ImageAdd({filename:this.imageSrc,name:this.nameimage,type:this.fileType,id:this.imageId}).subscribe(o=>{this.imageId=o.data.id,o&&this.databaseService.ProductAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,category:this.formGroup.value.category,price:this.formGroup.value.price,image:o.data.id,id:this.formGroup.value.id}}).subscribe(l=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},l=>{console.log(l),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})}):this.databaseService.ProductAdd({data:{name:this.formGroup.value.name,description:this.formGroup.value.description,category:this.formGroup.value.category,price:this.formGroup.value.price,image:this.imageId,id:this.formGroup.value.id}}).subscribe(o=>{this.fetch(),this.formGroup.reset(),this.hideChildModal(),this.toaster.success(this.translateservice.instant("MESSAGES.SAVE_SUCCESS"),"OK")},o=>{console.log(o),this.toaster.error(this.translateservice.instant("MESSAGES.SAVE_ERROR"),"OK")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.tT),t.Y36(p.F0),t.Y36(g._W),t.Y36(x.k),t.Y36(Z.sK),t.Y36(r.qu),t.Y36(t.sBO),t.Y36(S.H7),t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-product"]],viewQuery:function(e,o){if(1&e&&(t.Gf(c.nE,5),t.Gf(Y,5),t.Gf(Q,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.table=a.first),t.iGM(a=t.CRH())&&(o.childModal=a.first),t.iGM(a=t.CRH())&&(o.childEditModal=a.first)}},features:[t._Bn([g._W])],decls:157,vars:117,consts:[[1,"card"],[1,"card-header"],[1,"card-title","mb-2","fw-bolder"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],[1,"btn-group"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"la","la-file-pdf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"la","la-plus"],[1,"card-body"],[1,"table-responsive"],[3,"rows","columnMode","headerHeight","footerHeight","limit","loadingIndicator","selected","selectionType","rowHeight","scrollbarH"],["table",""],[3,"width","sortable","canAutoResize","draggable","resizeable"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],["name","#",3,"width"],["prop","name",3,"name","width","canAutoResize","resizeable"],[3,"name","width"],["cellClass","allow-overflow",3,"sortable","width"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","dialog-child-name",1,"modal","fade",3,"config"],["childModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","dialog-child-name",1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","validSubmit"],[1,"row"],[1,"col-md-8"],[1,"form-group","mb-3"],[1,"form-label"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","name",1,"form-control"],[1,"col-md-6","form-group","mb-3"],["type","text","formControlName","price",1,"form-control"],["type","text","formControlName","codebarre",1,"form-control"],["type","text","formControlName","description",1,"form-control"],[1,"col-md-3","mb-3"],[1,"mb-3"],[3,"shape","size","src"],["type","file","accept","image/png, image/jpeg",1,"form-control",3,"change"],[1,"col-md-12"],["type","button",1,"btn","btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary"],["childEditModal","bs-modal"],["id","dialog-childedit-name",1,"modal-title","pull-left"],["template",""],[1,"form-check","mb-0"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"d-flex","align-items-center"],[3,"size","src"],[1,"ms-2"],[1,"text-dark","fw-bold"],["dropdownClass","d-block text-end ms-3",3,"click"],["href","javascript:void(0)",1,"px-2"],[1,"feather","icon-more-vertical"],["alignment","right"],["action",""],["dropdownItem","","href","javascript:void(0)",3,"click"],[1,"feather","icon-trash-2"],[3,"value"],[1,"modal-body","text-center"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h4",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return o.exportToPDF()}),t._UZ(8,"i",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return o.showChildModal()}),t._UZ(12,"i",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",10),t.TgZ(17,"ngx-datatable",11,12),t.TgZ(19,"ngx-datatable-column",13),t.YNc(20,z,2,1,"ng-template",14),t.YNc(21,j,2,1,"ng-template",15),t.qZA(),t.TgZ(22,"ngx-datatable-column",16),t.YNc(23,V,1,1,"ng-template",15),t.qZA(),t.TgZ(24,"ngx-datatable-column",17),t.ALo(25,"translate"),t.YNc(26,D,5,3,"ng-template",15),t.qZA(),t.TgZ(27,"ngx-datatable-column",18),t.ALo(28,"translate"),t.YNc(29,B,1,1,"ng-template",15),t.qZA(),t.TgZ(30,"ngx-datatable-column",18),t.ALo(31,"translate"),t.YNc(32,K,1,1,"ng-template",15),t.qZA(),t.TgZ(33,"ngx-datatable-column",18),t.ALo(34,"translate"),t.YNc(35,W,1,1,"ng-template",15),t.qZA(),t.TgZ(36,"ngx-datatable-column",18),t.ALo(37,"translate"),t.YNc(38,X,1,1,"ng-template",15),t.qZA(),t.TgZ(39,"ngx-datatable-column",19),t.YNc(40,$,17,6,"ng-template",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",20,21),t.TgZ(43,"div",22),t.TgZ(44,"div",23),t.TgZ(45,"div",24),t.TgZ(46,"h4",25),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"button",26),t.NdJ("click",function(){return o.hideChildModal()}),t.TgZ(50,"span",27),t._uU(51,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"div",28),t.TgZ(53,"form",29),t.NdJ("validSubmit",function(){return o.onSubmit()}),t.TgZ(54,"div",30),t.TgZ(55,"div",31),t.TgZ(56,"div",32),t.TgZ(57,"label",33),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"ng-select",34),t.YNc(61,tt,2,2,"ng-option",35),t.qZA(),t.qZA(),t.TgZ(62,"div",32),t.TgZ(63,"label",33),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._UZ(66,"input",36),t.qZA(),t.TgZ(67,"div",30),t.TgZ(68,"div",37),t.TgZ(69,"label",33),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",38),t.qZA(),t.TgZ(73,"div",37),t.TgZ(74,"label",33),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"input",39),t.qZA(),t.qZA(),t.TgZ(78,"div",32),t.TgZ(79,"label",33),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"textarea",40),t._uU(83,"                "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",41),t.TgZ(85,"label",33),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"div",42),t._UZ(89,"avatar",43),t.qZA(),t.TgZ(90,"input",44),t.NdJ("change",function(l){return o.onFileSelect(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"div",45),t.TgZ(92,"button",46),t.NdJ("click",function(){return o.onReset()}),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"button",47),t._uU(96),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",20,48),t.TgZ(100,"div",22),t.TgZ(101,"div",23),t.TgZ(102,"div",24),t.TgZ(103,"h4",49),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"button",26),t.NdJ("click",function(){return o.hideChildModal()}),t.TgZ(107,"span",27),t._uU(108,"\xd7"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",28),t.TgZ(110,"form",29),t.NdJ("validSubmit",function(){return o.onSubmitEdit()}),t.TgZ(111,"div",30),t.TgZ(112,"div",31),t.TgZ(113,"div",32),t.TgZ(114,"label",33),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"ng-select",34),t.YNc(118,et,2,2,"ng-option",35),t.qZA(),t.qZA(),t.TgZ(119,"div",32),t.TgZ(120,"label",33),t._uU(121),t.ALo(122,"translate"),t.qZA(),t._UZ(123,"input",36),t.qZA(),t.TgZ(124,"div",30),t.TgZ(125,"div",37),t.TgZ(126,"label",33),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",38),t.qZA(),t.TgZ(130,"div",37),t.TgZ(131,"label",33),t._uU(132),t.ALo(133,"translate"),t.qZA(),t._UZ(134,"input",39),t.qZA(),t.qZA(),t.TgZ(135,"div",32),t.TgZ(136,"label",33),t._uU(137),t.ALo(138,"translate"),t.qZA(),t.TgZ(139,"textarea",40),t._uU(140,"                "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(141,"div",41),t.TgZ(142,"label",33),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.TgZ(145,"div",42),t._UZ(146,"avatar",43),t.qZA(),t.TgZ(147,"input",44),t.NdJ("change",function(l){return o.onFileSelect(l)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(148,"div",45),t.TgZ(149,"button",46),t.NdJ("click",function(){return o.onReset()}),t._uU(150),t.ALo(151,"translate"),t.qZA(),t.TgZ(152,"button",47),t._uU(153),t.ALo(154,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(155,ot,7,1,"ng-template",null,50,t.W1O)),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,63,"title.product")),t.xp6(6),t.hij("",t.lcZ(10,65,"action.print")," "),t.xp6(4),t.hij("",t.lcZ(14,67,"action.add")," "),t.xp6(4),t.Q6J("rows",o.rows)("columnMode",o.columnMode)("headerHeight",50)("footerHeight",100)("limit",10)("loadingIndicator",!0)("selected",o.selected)("selectionType",o.SelectionType.multi)("rowHeight",o.rowHeight)("scrollbarH",o.scrollbarH),t.xp6(2),t.Q6J("width",40)("sortable",!1)("canAutoResize",!1)("draggable",!1)("resizeable",!1),t.xp6(3),t.Q6J("width",20),t.xp6(2),t.s9C("name",t.lcZ(25,69,"fields.libelle")),t.Q6J("width",350)("canAutoResize",!1)("resizeable",!1),t.xp6(3),t.s9C("name",t.lcZ(28,71,"fields.price")),t.Q6J("width",70),t.xp6(3),t.s9C("name",t.lcZ(31,73,"fields.category")),t.Q6J("width",70),t.xp6(3),t.s9C("name",t.lcZ(34,75,"fields.quantity")),t.Q6J("width",70),t.xp6(3),t.s9C("name",t.lcZ(37,77,"fields.description")),t.Q6J("width",70),t.xp6(3),t.Q6J("sortable",!1)("width",40),t.xp6(2),t.Q6J("config",t.DdM(115,J)),t.xp6(6),t.Oqu(t.lcZ(48,79,"title.addproduct")),t.xp6(6),t.Q6J("formGroup",o.formGroup),t.xp6(5),t.Oqu(t.lcZ(59,81,"fields.category")),t.xp6(3),t.Q6J("ngForOf",o.categories),t.xp6(3),t.Oqu(t.lcZ(65,83,"fields.libelle")),t.xp6(6),t.Oqu(t.lcZ(71,85,"fields.price")),t.xp6(5),t.Oqu(t.lcZ(76,87,"fields.codebarre")),t.xp6(5),t.Oqu(t.lcZ(81,89,"fields.description")),t.xp6(6),t.Oqu(t.lcZ(87,91,"fields.image")),t.xp6(3),t.Q6J("shape","square")("size",130)("src",o.imageSrc),t.xp6(4),t.Oqu(t.lcZ(94,93,"action.cancel")),t.xp6(3),t.Oqu(t.lcZ(97,95,"action.save")),t.xp6(2),t.Q6J("config",t.DdM(116,J)),t.xp6(6),t.Oqu(t.lcZ(105,97,"title.editproduct")),t.xp6(6),t.Q6J("formGroup",o.formGroup),t.xp6(5),t.Oqu(t.lcZ(116,99,"fields.category")),t.xp6(3),t.Q6J("ngForOf",o.categories),t.xp6(3),t.Oqu(t.lcZ(122,101,"fields.libelle")),t.xp6(6),t.Oqu(t.lcZ(128,103,"fields.price")),t.xp6(5),t.Oqu(t.lcZ(133,105,"fields.codebarre")),t.xp6(5),t.Oqu(t.lcZ(138,107,"fields.description")),t.xp6(6),t.Oqu(t.lcZ(144,109,"fields.image")),t.xp6(3),t.Q6J("shape","square")("size",130)("src",o.imageSrc),t.xp6(4),t.Oqu(t.lcZ(151,111,"action.cancel")),t.xp6(3),t.Oqu(t.lcZ(154,113,"action.save")))},directives:[c.nE,c.UC,c.tk,c.vq,h.oB,r._Y,r.JL,r.sg,u.MU,u.HK,A.w9,r.JJ,r.u,f.sg,r.Fj,u.oH,y.A,w.L,U.h,M.h,A.xv],pipes:[Z.X$],styles:[""]}),i})(),data:{title:"Support",hidePageHeader:!0}}];let at=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(it)],p.Bz]}),i})();var nt=s(4466),lt=s(8900),rt=s(2563),st=s(4079),ct=s(902),dt=s(8932),ut=s(8090),_=s(1841),mt=s(2340);let pt=(()=>{class i{constructor(e){this.http=e,this.apiUrl=mt.N.API_URL}upload(e,o){console.log(o);const a=new _.aW("POST",this.apiUrl+e,o);return this.http.request(a)}setHeader(e={}){return this.headers=new _.WM(e),this}setCredentials(e){return this.withCredentials=e,this}setFileName(e){return this.fileName=e,this}addExtraData(e={}){return this.defaultBody=e,this}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(_.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),gt=(()=>{class i{static forRoot(){return{ngModule:i,providers:[pt]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,r.u5,_.JF]]}),i})(),ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[nt.m,at,st.h,h.zk,A.A0,ct.n,f.ez,c.xD,lt.F,rt.k,u.VN,u.VN.forRoot(),g.Rh.forRoot(),dt.fx,ut.d,gt.forRoot()]]}),i})()}}]);